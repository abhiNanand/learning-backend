Multer is an npm package commonly used in Node.js applications for handling multipart/form data. particularly for file uploads. It simplifies the process of handling file uploads by providing middleware that can be easily integrated into Express.js applications.

Features of npm multer
File Uploads: Allows uploading files from client-side forms to the server.
Middleware: Integrates seamlessly with Express.js middleware, making it easy to handle file uploads within routes.
File Storage: Provides options for storing uploaded files on the server, such as in-memory storage, disk storage, or using a custom storage engine.
File Filtering: Supports filtering uploaded files based on file type, size, and other criteria.
Error Handling: Offers error handling for file uploads, including handling file size limits, invalid file types, and other upload-related errors.
==================================================================================================

 Letâ€™s break down Multer syntax step by step so it feels simple.

ðŸ”¹ Step 1: Import Multer
const multer = require("multer");

ðŸ‘‰ This brings in Multer into your project.

ðŸ”¹ Step 2: Define Storage
const storage = multer.diskStorage({
  destination: (req, file, cb) => {
    cb(null, "uploads/");
  },
  filename: (req, file, cb) => {
    cb(null, Date.now() + "-" + file.originalname);
  },
});

multer.diskStorage({ ... }) â†’ tells Multer where and how to store files.

destination â†’ folder where file will be stored.

cb(null, "uploads/") â†’ means â€œno error, store in uploads folderâ€.

filename â†’ how to name the file when saving.

Date.now() + file.originalname â†’ ensures unique name (like 1723959271-myphoto.png).


ðŸ”¹ Step 3: Create Upload Middleware
const upload = multer({ storage });

ðŸ‘‰ upload is now a middleware that can handle files.

ðŸ”¹ Step 4: Use in Route
Upload Single File
app.post("/upload", upload.single("myFile"), (req, res) => {
  res.send("File uploaded: " + req.file.filename);
});

upload.single("myFile") â†’ "myFile" must match the form field name (from frontend).

req.file â†’ info about uploaded file.

Upload Multiple Files
app.post("/uploads", upload.array("myFiles", 5), (req, res) => {
  res.send("Uploaded " + req.files.length + " files");
});

upload.array("myFiles", 5) â†’ allows max 5 files from field "myFiles".

req.files â†’ array of uploaded files.


âœ… In short:
multer.diskStorage() â†’ where and how to save file.

multer({ storage }) â†’ create upload middleware.

upload.single("fieldName") â†’ upload 1 file.

upload.array("fieldName", limit) â†’ upload multiple files.


 

